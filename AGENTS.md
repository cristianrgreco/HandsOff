Hands Off (Mac) - Agent Notes

Purpose
- macOS menu bar app that detects hands approaching the face and nudges users to stop face-touching.
- Local-only processing; no video storage or uploads.

Current behavior
- Start/stop monitoring from the menu bar.
- Alerts: sound, notification banner, and/or flashing red screen.
- Stats: scatter chart for hour/day/week, plus daily total.
- Camera selection prefers external devices; auto-fallback to next available when devices change.
- App runs as a menu bar app (LSUIElement = true).

Architecture (high-level)
- AppState: central state + monitoring lifecycle, device changes, alerts, stats.
- DetectionEngine: AVFoundation capture + Vision face/hand detection, emits hit + preview frames.
- SettingsStore: user preferences (sound, banner, flash screen, camera, start at login).
- StatsStore: daily totals + alert history buckets.
- CameraStore: device discovery and connect/disconnect handling.
- AlertManager: sound + banner handling.
- BlurOverlayController: red flashing overlay (screen alert).

Key files
- HandsOff/AppState.swift
- HandsOff/Services/DetectionEngine.swift
- HandsOff/Models/SettingsStore.swift
- HandsOff/Models/StatsStore.swift
- HandsOff/Models/CameraStore.swift
- HandsOff/Services/AlertManager.swift
- HandsOff/Views/BlurOverlayController.swift
- HandsOff/Views/MenuBarView.swift
- HandsOff/Views/PreviewFrameView.swift
- HandsOff/Views/StatsView.swift
- HandsOff/Views/SettingsView.swift
- HandsOff/Supporting/Info.plist
- project.yml (xcodegen source of truth)

Dev workflow
- Generate project: scripts/gen_project.sh
- Build: scripts/build.sh
- Run: scripts/run.sh
- Relaunch: scripts/relaunch.sh
- Build + relaunch: scripts/build_and_run.sh
- If xcodebuild fails the first time: sudo xcodebuild -runFirstLaunch

Notes
- Info.plist is generated by xcodegen. Keep LSUIElement in project.yml under info.properties.
- Always rebuild + relaunch after changes.
